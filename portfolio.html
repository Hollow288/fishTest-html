<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="keywords" content="Cupboard">
    <meta name="description" content="Cupboard - Cabinet HTML">
    <meta name="author" content="Hollow">

    <title>Portfolio - Cabinet HTML</title>

    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <link rel="stylesheet" href="static/css/fonts.css">
    <link rel="stylesheet" href="static/css/all.min.css">
    <link rel="stylesheet" href="static/css/animate.css">
    <link rel="stylesheet" href="static/css/slick.css">
    <link rel="stylesheet" href="static/css/fancybox.css">
    <link rel="stylesheet" href="static/css/style.css">
    <link rel="stylesheet" href="static/css/responsive.css">
    <link rel="stylesheet" href="static/css/style3.css">
    <link rel="stylesheet" href="static/css/portfollostyle.css">
    <link rel="stylesheet" href="static/js/element-ui/lib/theme-chalk/index.css">
   <style>
      .el-pagination.is-background .el-pager li:not(.disabled).active{
          background-color: #d7926b;
      }

      [v-cloak] {
          display: none;
      }
   </style>
</head>
<body>
<!-- Start Header -->
<div class="main-inner pt-20 pb-20 ps-3 pe-3 ps-md-0 pe-md-0">
    <nav class="navbar navbar-expand-lg p-0">
        <div class="container">
            <a href="index.html">
                <img src="static/picture/fish-icon.svg"  width="50" height="30">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                <i class="fa-solid fa-bars fa-fw"></i>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" aria-current="page" href="index.html">主页</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="about-us.html">关于我们</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="portfolio.html">工程案例</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="services.html">涉及业务</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="blog.html">新闻资讯</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">联系我们</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>

<main>
    <div id="app" v-cloak>
        <section class="about-hero-section ps-3 pe-3 ps-md-0 pe-md-0">
            <div class="container">
                <div class="row justify-content-center">
                    <h1 class="text-white mb-10">Portfolio</h1>
                    <div class="title-border"></div>
                </div>
            </div>
        </section>
        <el-container >
            <el-aside width="200px" style="background-color: rgb(238, 241, 246)" class="wow slideInLeft" >
                <el-menu  v-for="item in menuOptions" v-bind:key="item.key" :default-active="chooseOption" active-text-color="#d7926b">

                       <el-menu-item @click="menuOnclick(item)" :index='item.key' style="font-family: 'Alibaba-PuHuiTi',serif;">{{item.value}}
                       </el-menu-item>
                </el-menu>
            </el-aside>
            <el-main>
                <div class="container" style="margin-top: 80px " >
                    <div class="row" v-loading="loading">
                        <div class="grid-photo wow slideInRight" >
                            <div v-for="item in portFolioList" >
                                <a :href="item.panoramaUrl" data-fancybox="gallery">
                                    <photo-card :img="item.thumbnailUrl" link=""></photo-card>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="row" style="margin-top: 100px; text-align: right; ">
                        <el-pagination
                                background
                                layout="prev, pager, next"
                                :page-size="pageSize"
                                :total="total"
                                :current-page="currentPage"
                                @current-change="currentChange"
                                style=".el-pager active: #ffcf40">
                        </el-pagination>
                    </div>
                </div>
            </el-main>
        </el-container>
    </div>

</main>
<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-sm-4 col-xs-12">
                <div class="content about">
                    <h2>Hadu</h2>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Expedita rem eius ratione. Commodi eius magnam</p>
                </div>
            </div>
            <div class="col-md-4 col-sm-4 col-xs-12">

                <div class="content">
                    <h4>Support</h4>
                    <ul class="left-menu">
                        <li>
                            <a href="" class="active">Home</a>
                        </li>
                        <li>
                            <a href="about-us.html">About Us</a>
                        </li>
                        <li>
                            <a href="portfolio.html">Portfolio</a>
                        </li>
                    </ul>
                    <ul class="right-menu">
                        <li class="mb-10">
                            <a href="services.html">Services</a>
                        </li>
                        <li class="mb-10">
                            <a href="blog.html">Blog</a>
                        </li>
                        <li class="mb-10">
                            <a href="contact.html">Contact Us</a>
                        </li>
                    </ul>
                </div>

            </div>

            <div class="col-md-4 col-sm-4 col-xs-12">
                <div class="content contact-us no-mb">
                    <h4>Contact Us</h4>
                    <ul>
                        <li>
                            <span>Address:</span>  495 Walk Street, Barcelona, Spain</li>
                        <li>
                            <span>Phone:</span> +1 234 45689</li>
                        <li>
                            <span>Email:</span> example@domain.com</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="wrap-copyright">
        <p>Copyright &copy; 2024.Company name All rights reserved.</p>
    </div>
</footer>
<div class="scroll-area">
    <div class="top-wrap">
        <div class="go-top-btn-wraper">
            <div class="go-top go-top-button">
                <i class="fas fa-arrow-up"></i>
                <i class="fas fa-arrow-up"></i>
            </div>
        </div>
    </div>
</div>

<script src="static/js/jquery-2.2.4.min.js"></script>
<script src="static/js/bootstrap.min.js"></script>
<script src="static/js/wow.min.js"></script>
<script src="static/js/slick.min.js"></script>
<script src="static/js/fancybox.umd.js"></script>
<script src="static/js/script.js"></script>
<script type="text/javascript" src='static/js/vue.js'></script>
<script src="static/js/element-ui/lib/index.js"></script>
<script>
    new Vue({
        el: '#app',
        data:{
            menuOptions: [],
            chooseOption: "",
            total: 0,
            currentPage:1,
            pageSize:8,
            loading:false,
            portFolioList:[],
            dataLoaded: false,
        },
        methods: {
            queryType(){
                let that = this
                $.ajax({
                    url: 'http://localhost:8999/fish-api/common/portal-type', // 后端接口地址
                    type: "GET",
                    headers: {
                        "Accept": "application/json, text/plain, */*"
                    },
                    success: function(response) {
                        that.menuOptions = response.data
                        that.loading = false
                    },
                    error: function(xhr, status, error) {
                        that.loading = false
                    }
                })
            },
            queryList(){
                let that = this
                $.ajax({
                    url: `http://localhost:8999/fish-api/common/portal-portfolio?type=${this.chooseOption}&page=${this.currentPage}&pageSize=${this.pageSize}`,
                    type: "GET",
                    headers: {
                        "Accept": "application/json, text/plain, */*"
                    },
                    success: function(response) {
                        that.portFolioList = response.data.data
                        that.total = response.data.total
                        that.loading = false
                    },
                    error: function(xhr, status, error) {
                        that.loading = false
                    }
                })
            },
            menuOnclick(item) {
                // 回退到第一页
               this.currentPage = 1;
               this.chooseOption = item.key;
                this.loading = true;
               this.queryList()
            },
            currentChange(val){
                this.currentPage = val
                let that = this;
                that.loading = true;
                this.queryList()
            }
        },
        mounted(){
            this.currentPage = 1;
            this.chooseOption = 'ztcg-code'
            this.total = 10;
            this.pageSize = 8;
            this.loading = true;
            this.queryList()
            this.queryType()
        }
    })
</script>
<script type="text/javascript" src="static/js/portfolloscript.js"></script>
</body>
</html>